<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>CAT vs HUMAN: INTERACTIVE SYSTEM</title>
    <link href="https://fonts.googleapis.com/css2?family=DungGeunMo&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #ffeadb; --point: #ff8c42; --human: #4a90e2; --dark: #5d4037; --success: #27ae60; --fail: #e74c3c; }
        body { background: var(--bg); color: var(--dark); font-family: 'DungGeunMo', sans-serif; margin: 0; overflow: hidden; display: flex; flex-direction: column; align-items: center; }
        #header { background: var(--point); width: 100%; padding: 10px 0; color: white; text-align: center; box-shadow: 0 4px 0 #d35400; z-index: 10; }
        #timer-wrapper { width: 85%; height: 15px; background: #eee; border: 3px solid var(--dark); margin: 10px 0; }
        #timer-fill { width: 100%; height: 100%; background: var(--fail); transition: width 0.1s linear; }
        
        #game-board { display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; width: 98vw; height: 80vh; gap: 10px; padding: 5px; }
        .monitor { background: #fff5eb; border: 4px solid var(--dark); display: flex; flex-direction: column; justify-content: space-between; align-items: center; position: relative; padding: 10px; box-shadow: 4px 4px 0px rgba(0,0,0,0.1); }
        .monitor.human-zone { border-color: var(--human); }
        .monitor.cat-zone { border-color: var(--point); }

        .tag { position: absolute; top: -10px; left: 10px; background: var(--dark); color: white; padding: 2px 6px; font-size: 0.7rem; }
        .content-area { width: 100%; height: 50%; background: white; border: 2px solid var(--dark); display: flex; justify-content: center; align-items: center; overflow: hidden; position: relative; }
        img, video { max-width: 100%; max-height: 100%; object-fit: contain; }

        /* Ïà´Ïûê Î≤ÑÌäº Ïä§ÌÉÄÏùº */
        .button-pad { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; width: 90%; margin-top: 5px; }
        .num-btn { background: white; border: 2px solid var(--dark); padding: 5px; cursor: pointer; font-family: 'DungGeunMo'; font-size: 0.9rem; transition: 0.1s; border-bottom: 4px solid var(--dark); }
        .num-btn:active { transform: translateY(2px); border-bottom: 2px solid var(--dark); }
        .num-btn.selected { background: var(--point); color: white; }

        .audio-btn { background: #5d4037; color: white; border: none; padding: 5px 10px; cursor: pointer; font-family: 'DungGeunMo'; margin: 5px 0; font-size: 0.8rem; }
        
        .feedback { font-weight: bold; height: 1.2rem; font-size: 0.85rem; margin-top: 2px; }
        .explosion { position: absolute; font-size: 4rem; z-index: 100; display: none; pointer-events: none; animation: explode 0.5s ease-out forwards; }
        @keyframes explode { 0% { transform: scale(0.3); opacity: 1; } 100% { transform: scale(2); opacity: 0; } }
    </style>
</head>
<body>

<div id="header"><h1>[ CAT vs HUMAN ] ÌÅ¥Î¶≠Ìòï Î≥¥Ïïà ÏãúÏä§ÌÖú</h1></div>
<div id="timer-wrapper"><div id="timer-fill"></div></div>
<div id="game-board"><div id="m1" class="monitor"></div><div id="m2" class="monitor"></div><div id="m3" class="monitor"></div><div id="m4" class="monitor"></div></div>

<script>
    const raw = (url) => url.replace("github.com", "raw.githubusercontent.com").replace("/blob/", "/");

    const problemDB = [
        { type: 'human', q: "[Î≥¥Í∏∞] Í≥†ÏñëÏù¥Í∞Ä Î™á Î≤à ÎïåÎ¶¨ÎÇòÏöî?", a: "Ï†ïÎãµ", img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/%EB%B3%B4%EA%B8%B0%EB%AC%B8%EC%A0%9C1.JPG"), video: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/%EB%B3%B4%EA%B8%B0%20%EB%AC%B8%EC%A0%9C%201%EB%B2%88%20%EB%95%8C%EB%A6%AC%EB%8A%94%20%EA%B3%A0%EC%96%91%EC%9D%B4.mp4"), multi: false },
        { type: 'human', q: "ÌéòÎ•¥ÏãúÏïà Í≥†ÏñëÏù¥Î•º Í≥†Î•¥ÏÑ∏Ïöî.", a: "1", img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/1.JPG"), multi: false },
        { type: 'human', q: "Ï∏ÑÎ•¥(Ìô©ÌÉú)Î•º Í≥†Î•¥ÏÑ∏Ïöî.", a: "2", img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/2.JPG"), multi: false },
        { type: 'cat', q: "Î™á Ïãú Ïù∏ÏßÄ ÎßûÏ∂îÏÑ∏Ïöî. (ÎÇ¥ Í≥†Ïñë)", a: "9", img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/3.JPG"), multi: false },
        { type: 'human', q: "Í≥†ÏñëÏù¥Í∞Ä ÏïÑÎãå Í≤É(Î≤àÌò∏)ÏùÑ ÎàÑÎ•¥ÏÑ∏Ïöî.", a: "Ï†ïÎãµ", img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/4.JPG"), multi: false },
        { type: 'human', q: "ÌãÄÎ¶∞ Í≥≥ÏùÄ Ï¥ù Î™á Íµ∞Îç∞?", a: "3", img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/5.JPG"), multi: false },
        { type: 'human', q: "Í≥†ÏñëÏù¥ Ïπ∏ Î≤àÌò∏Î•º Î™®Îëê ÎàÑÎ•¥ÏÑ∏Ïöî.", a: "135", img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/6.JPG"), multi: true },
        { type: 'human', q: "Ïà®ÏùÄ Í≥†ÏñëÏù¥ Ïπ∏ÏùÑ Î™®Îëê ÎàÑÎ•¥ÏÑ∏Ïöî.", a: "24", img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/7.JPG"), multi: true },
        { type: 'human', q: "ÏïÑÍ∏∞ ÏÉ¥ Í≥†ÏñëÏù¥Î•º Í≥†Î•¥ÏÑ∏Ïöî.", a: "3", img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/8.JPG"), multi: false },
        { type: 'cat', q: "Í≥†ÏñëÏù¥Í∞Ä ÏûàÎçò ÏúÑÏπò Í∞úÏàòÎäî?", a: "3", img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/9.JPG"), multi: false },
        { type: 'cat', q: "Îì£Í∏∞ 1: ÏÜåÎ¶¨Î•º Îì£Í≥† Ï†ïÎãµ Ïù¥ÎØ∏ÏßÄÎ•º ÌôïÏù∏!", a: "Ï†ïÎãµ", audio: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/%EA%B3%A0%EC%96%91%EC%9D%B4%20%EB%82%98%EA%B1%B0%EB%9E%98%20%EB%93%A3%EA%B8%B0%20%EB%AC%B8%EC%A0%9C%201%EB%B2%88.m4a"), img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/%EB%93%A3%EA%B8%B0%EB%AC%B8%EC%A0%9C1.JPG"), multi: false },
        { type: 'cat', q: "Îì£Í∏∞ 2: Í±∞Íæ∏Î°ú ÎßêÌïú Î¨∏Ïû•ÏùÄ?", a: "Ï†ïÎãµ", audio: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/%EA%B3%A0%EC%96%91%EC%9D%B4%20%ED%95%9C%EA%B5%AD%EB%A7%90%EC%9D%84%20%EC%95%8C%EC%95%84%EC%9A%94%20%EB%93%A3%EA%B8%B0%20%EB%AC%B8%EC%A0%9C%202%EB%B2%88.m4a"), img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/%EB%93%A3%EA%B8%B0%EB%AC%B8%EC%A0%9C2.JPG"), multi: false },
        { type: 'cat', q: "Îì£Í∏∞ 3: ÏÇ¨Ïò§ÎùºÍ≥† Ìïú ÏùåÏãùÏùÄ?", a: "Ï†ïÎãµ", audio: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/%EB%93%A3%EA%B8%B0%20%EB%AC%B8%EC%A0%9C%203%EB%B2%88%20%EC%98%A4%EC%A7%95%EC%96%B4.m4a"), img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/%EB%93%A3%EA%B8%B0%EB%AC%B8%EC%A0%9C3.JPG"), multi: false },
        { type: 'cat', q: "Îì£Í∏∞ 4: ÏÇ¨Ïò§ÏßÄ ÎßêÎùºÎäî Í≤ÉÏùÄ?", a: "Ï†ïÎãµ", audio: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/%EB%93%A3%EA%B8%B0%20%EB%AC%B8%EC%A0%9C%204%EB%B2%88%20%EC%83%9D%EA%B0%81%20%EC%82%AC%EC%98%A4%EC%A7%80%20%EB%A7%88%EC%84%B8%EC%9A%94.m4a"), img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/%EB%93%A3%EA%B8%B0%EB%AC%B8%EC%A0%9C4.JPG"), multi: false }
    ];

    let timeLeft = 100;
    let selectedAnswers = ["", "", "", ""];

    function render() {
        const shuffled = [...problemDB].sort(() => Math.random() - 0.5);
        selectedAnswers = ["", "", "", ""];
        
        document.querySelectorAll('.monitor').forEach((m, i) => {
            const p = shuffled[i];
            const isH = p.type === 'human';
            m.className = `monitor ${isH ? 'human-zone' : 'cat-zone'}`;
            
            let visual = p.video ? `<video src="${p.video}" autoplay loop muted playsinline></video>` : `<img src="${p.img}">`;
            
            m.innerHTML = `
                <div class="explosion">üí•</div>
                <div class="tag">${isH ? 'HUMAN ONLY' : 'CAT ONLY'}</div>
                <div style="font-size:0.8rem; text-align:center;">${p.q}</div>
                <div class="content-area">${visual}</div>
                ${p.audio ? `<button class="audio-btn" onclick="new Audio('${p.audio}').play()">üéµ ÏÜåÎ¶¨ Îì£Í∏∞</button>` : ''}
                <div class="button-pad" id="pad-${i}">
                    ${[1,2,3,4,5,6,7,8,9].map(num => `<button class="num-btn" onclick="handleClick(${i}, '${num}', '${p.a}', ${p.multi}, this)">${num}</button>`).join('')}
                    <button class="num-btn" style="grid-column: span 1; background:#eee;" onclick="handleClick(${i}, 'Ï†ïÎãµ', '${p.a}', false, this)">OK</button>
                </div>
                <div class="feedback" id="fb-${i}"></div>
            `;
        });
    }

    function handleClick(monitorIdx, val, correct, isMulti, btn) {
        const fb = document.getElementById(`fb-${monitorIdx}`);
        
        if (isMulti) {
            // Îã§Ï§ë ÏÑ†ÌÉù (Ïòà: 135)
            if (val === 'Ï†ïÎãµ') {
                checkFinal(monitorIdx, selectedAnswers[monitorIdx], correct);
            } else {
                if (!selectedAnswers[monitorIdx].includes(val)) {
                    selectedAnswers[monitorIdx] += val;
                    btn.classList.add('selected');
                }
            }
        } else {
            // Îã®Ïùº ÏÑ†ÌÉù
            checkFinal(monitorIdx, val, correct);
        }
    }

    function checkFinal(idx, val, correct) {
        const fb = document.getElementById(`fb-${idx}`);
        const sortedVal = val.split('').sort().join('');
        const sortedCorrect = correct.split('').sort().join('');

        if (val === correct || sortedVal === sortedCorrect || correct === "Ï†ïÎãµ") {
            fb.innerText = "ACCESS GRANTED"; fb.style.color = "var(--success)";
        } else {
            fb.innerText = "ACCESS DENIED"; fb.style.color = "var(--fail)";
        }
    }

    function tick() {
        timeLeft -= 0.15;
        document.getElementById('timer-fill').style.width = timeLeft + "%";
        if (timeLeft <= 0) {
            document.querySelectorAll('.explosion').forEach(ex => ex.style.display = 'block');
            setTimeout(() => { timeLeft = 100; render(); }, 500);
        }
    }

    setInterval(tick, 20);
    render();
</script>
</body>
</html>
