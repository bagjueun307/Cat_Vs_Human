<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì´ˆë“±í•™êµ ì»´í“¨í„°ì‹¤: 5ë¶„ ì‹¤ì‹œê°„ ëŒ€ê²° V20</title>
    <link href="https://fonts.googleapis.com/css2?family=DungGeunMo&display=swap" rel="stylesheet">
    <style>
        body { background: #000; color: #00ff00; font-family: 'DungGeunMo', sans-serif; margin: 0; overflow: hidden; display: flex; flex-direction: column; align-items: center; }
        
        /* ë¡œë¹„ í™”ë©´ */
        #lobby { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 5000; }
        .start-btn { padding: 20px 50px; font-size: 2rem; background: #f1c40f; border: 5px outset #aaa; cursor: pointer; font-family: 'DungGeunMo'; }
        .start-btn:active { border-style: inset; }

        #header { width: 100%; padding: 10px; background: #222; border-bottom: 4px inset #555; display: flex; flex-direction: column; align-items: center; }
        .time-container { width: 90%; height: 15px; background: #111; border: 2px inset #555; margin: 5px 0; overflow: hidden; }
        #time-bar { width: 100%; height: 100%; background: #00ff00; transition: width 0.1s linear; }

        /* 4ê°œ ëª¨ë‹ˆí„° ê·¸ë¦¬ë“œ */
        #game-grid { display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; width: 100vw; height: 82vh; gap: 10px; padding: 10px; box-sizing: border-box; }
        .monitor-container { position: relative; display: flex; flex-direction: column; align-items: center; border: 2px solid #333; padding: 5px; }
        
        .teacher-box { 
            width: 60px; height: 45px; font-size: 2rem; display: flex; justify-content: center; align-items: center;
            background: #333; border: 3px solid #555; border-radius: 8px 8px 0 0; margin-bottom: -3px;
        }
        .teacher-box.watching { background: #ff0000; color: #fff; animation: shake 0.1s infinite; } 

        .monitor { width: 100%; height: 100%; border: 6px outset #aaa; background: #000; display: flex; flex-direction: column; align-items: center; padding: 5px; box-sizing: border-box; }
        .red-mon { border-color: #e74c3c; }
        .blue-mon { border-color: #3498db; }

        .board { display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px; width: 100%; }
        .card { height: 18px; background: #222; color: #444; font-size: 0.5rem; display: flex; justify-content: center; align-items: center; border-radius: 2px; }
        .card.red { background: #e74c3c; color: white; }
        .card.blue { background: #3498db; color: white; }

        .input-wrap { margin-top: 8px; width: 95%; }
        input { width: 100%; padding: 5px; font-family: 'DungGeunMo'; background: #000; color: #fff; border: 2px solid #555; outline: none; text-align: center; font-size: 0.9rem; }
        input.caught { border-color: red !important; background: #400 !important; }

        @keyframes shake { 0% { transform: translateY(-1px); } 100% { transform: translateY(1px); } }
    </style>
</head>
<body>

<div id="lobby">
    <div style="font-size: 2.5rem; color: #f1c40f; margin-bottom: 20px;">ë–¡ë³¶ì´ ë‚´ê¸°: 5ë¶„ íƒ€ì í˜ˆíˆ¬</div>
    <button class="start-btn" onclick="startGlobalGame()">ìˆ˜ì—… ì‹œì‘! (ENTER)</button>
    <p style="color: #fff; margin-top: 20px;">ëª¨ë“  ëª¨ë‹ˆí„°ê°€ ë™ì‹œì— ì‹œì‘ë©ë‹ˆë‹¤.</p>
</div>

<div id="header">
    <div id="timer-text" style="font-size: 1.2rem;">ì»´í“¨í„° ìˆ˜ì—… ì¢…ë£Œê¹Œì§€: 300.0s</div>
    <div class="time-container"><div id="time-bar"></div></div>
</div>

<div id="game-grid">
    <div class="monitor-container">
        <div class="teacher-box t-all">ğŸ‘¨â€ğŸ«</div>
        <div class="monitor red-mon">
            <div class="board" id="board-1"></div>
            <div class="input-wrap"><input type="text" id="in-1" placeholder="í•™ìƒ 1 (RED)"></div>
        </div>
    </div>
    <div class="monitor-container">
        <div class="teacher-box t-all">ğŸ‘¨â€ğŸ«</div>
        <div class="monitor blue-mon">
            <div class="board" id="board-2"></div>
            <div class="input-wrap"><input type="text" id="in-2" placeholder="í•™ìƒ 2 (BLUE)"></div>
        </div>
    </div>
    <div class="monitor-container">
        <div class="teacher-box t-all">ğŸ‘¨â€ğŸ«</div>
        <div class="monitor red-mon">
            <div class="board" id="board-3"></div>
            <div class="input-wrap"><input type="text" id="in-3" placeholder="í•™ìƒ 3 (RED)"></div>
        </div>
    </div>
    <div class="monitor-container">
        <div class="teacher-box t-all">ğŸ‘¨â€ğŸ«</div>
        <div class="monitor blue-mon">
            <div class="board" id="board-4"></div>
            <div class="input-wrap"><input type="text" id="in-4" placeholder="í•™ìƒ 4 (BLUE)"></div>
        </div>
    </div>
</div>

<script>
    const schoolWords = ["ë–¡ë³¶ì´", "ê¸‰ì‹", "ìš´ë™ì¥", "ë°›ì•„ì“°ê¸°", "ë°©í•™", "ìš°ìœ ê¸‰ì‹", "ì•Œë¦¼ì¥", "ì§ê¿", "ì¤€ë¹„ë¬¼", "ì‹¤ë‚´í™”", "ìƒ‰ì¢…ì´", "ë”±ì§€", "ìŠ¬ëŸ¬ì‹œ", "í”¼ì¹´ì¸„", "í•™ì›", "ìˆ™ì œ", "ì²´ìœ¡", "ì†Œí’", "ì‰¬ëŠ”ì‹œê°„", "ì§€ìš°ê°œ", "í•„í†µ", "ì‹¤ë¡œí°", "ë¦¬ì½”ë”", "ë°˜ì¥", "ì¼ê¸°", "ë…ì„œ", "í”¼êµ¬", "íƒœê¶Œë„", "ë¬¸ë°©êµ¬", "ë½‘ê¸°", "ë¶„ì‹ì§‘", "êµì‹¤", "ëª¨ë‘ í™œë™", "êµì¥ì„ ìƒë‹˜", "ìš´ë™íšŒ", "ë§¤ì ", "ì¹ íŒ", "ë¶„í•„", "ì‹¤ë‚´í™”ê°€ë°©", "ì •ë¬¸"];

    let timeLeft = 3000;
    let isTeacherWatching = false;
    let gameActive = false;
    let teamLog = { red: [], blue: [] }; // ê³µí†µ ì ìˆ˜íŒ

    function init() {
        for(let i=1; i<=4; i++) {
            const board = document.getElementById(`board-${i}`);
            schoolWords.forEach(w => {
                const c = document.createElement('div');
                c.className = 'card';
                c.innerText = w;
                c.id = `mon-${i}-card-${w}`;
                board.appendChild(c);
            });
            setupInput(i);
        }
    }

    function startGlobalGame() {
        document.getElementById('lobby').style.display = 'none';
        gameActive = true;
        
        // ì „ì²´ íƒ€ì´ë¨¸ ì‹œì‘
        const timer = setInterval(() => {
            if(timeLeft > 0) {
                timeLeft--;
                document.getElementById('time-bar').style.width = (timeLeft / 3000) * 100 + "%";
                document.getElementById('timer-text').innerText = `ì»´í“¨í„° ìˆ˜ì—… ì¢…ë£Œê¹Œì§€: ${(timeLeft / 10).toFixed(1)}s`;
            } else {
                clearInterval(timer);
                finishGame();
            }
        }, 100);

        scheduleTeacher();
    }

    function scheduleTeacher() {
        if(!gameActive) return;
        setTimeout(() => {
            isTeacherWatching = true;
            const boxes = document.querySelectorAll('.t-all');
            boxes.forEach(b => {
                b.classList.add('watching');
                b.innerText = "ğŸ‘€";
            });

            setTimeout(() => {
                isTeacherWatching = false;
                boxes.forEach(b => {
                    b.classList.remove('watching');
                    b.innerText = "ğŸ‘¨â€ğŸ«";
                });
                scheduleTeacher();
            }, 2000);
        }, 18000);
    }

    function setupInput(id) {
        const input = document.getElementById(`in-${id}`);
        const team = (id === 1 || id === 3) ? 'red' : 'blue';

        input.addEventListener('keydown', (e) => {
            if(!gameActive) return;

            // ì‹¤ì‹œê°„ ê°ì‹œ íŒì •
            if(isTeacherWatching) {
                input.classList.add('caught');
                setTimeout(() => input.classList.remove('caught'), 500);
                
                // ê±¸ë¦¬ë©´ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¹´ë“œ í•˜ë‚˜ ëºê¸° (ë™ê¸°í™”)
                if(teamLog[team].length > 0) {
                    const lost = teamLog[team].pop();
                    // 1~4ë²ˆ ëª¨ë“  í™”ë©´ì—ì„œ í•´ë‹¹ ì¹´ë“œ ìƒ‰ìƒ ì œê±°
                    for(let j=1; j<=4; j++) {
                        document.getElementById(`mon-${j}-card-${lost}`).className = 'card';
                    }
                }
                input.value = '';
                e.preventDefault();
                return;
            }

            if(e.key === 'Enter') {
                const val = input.value.trim();
                // ë‹¨ì–´ê°€ ë§ê³  ì•„ì§ ì•„ë¬´ë„ ì•ˆ ë’¤ì§‘ì—ˆì„ ë•Œ
                if(schoolWords.includes(val) && !teamLog.red.includes(val) && !teamLog.blue.includes(val)) {
                    teamLog[team].push(val);
                    // 1~4ë²ˆ ëª¨ë“  í™”ë©´ì— ì‹¤ì‹œê°„ ë°˜ì˜
                    for(let j=1; j<=4; j++) {
                        const card = document.getElementById(`mon-${j}-card-${val}`);
                        card.className = `card ${team}`;
                    }
                }
                input.value = '';
            }
        });
    }

    function finishGame() {
        gameActive = false;
        const redScore = teamLog.red.length;
        const blueScore = teamLog.blue.length;
        const winner = redScore > blueScore ? "ë¹¨ê°•íŒ€" : (blueScore > redScore ? "íŒŒë‘íŒ€" : "ë¬´ìŠ¹ë¶€");
        alert(`ìˆ˜ì—… ì¢…ë£Œ!\në¹¨ê°•íŒ€: ${redScore} vs íŒŒë‘íŒ€: ${blueScore}\nê²°ê³¼: ${winner} ìŠ¹ë¦¬!`);
        location.reload();
    }

    init();
</script>
</body>
</html>
