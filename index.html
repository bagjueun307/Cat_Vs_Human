<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>CAT vs HUMAN: COLOR & GRID SYSTEM</title>
    <link href="https://fonts.googleapis.com/css2?family=DungGeunMo&display=swap" rel="stylesheet">
    <style>
        :root { 
            --bg: #1a1a1a; 
            --human-main: #3498db; --human-bg: #ebf5fb;
            --cat-main: #e67e22; --cat-bg: #fef5e7;
            --dark: #2c3e50; --fail: #e74c3c; --success: #27ae60;
        }
        body { background: var(--bg); color: white; font-family: 'DungGeunMo', sans-serif; margin: 0; overflow: hidden; display: flex; flex-direction: column; align-items: center; }
        
        #header { background: #333; width: 100%; padding: 10px 0; color: white; text-align: center; border-bottom: 4px solid #000; }
        #timer-wrapper { width: 90%; height: 12px; background: #444; border: 2px solid #000; margin: 10px 0; }
        #timer-fill { width: 100%; height: 100%; background: var(--fail); transition: width 0.1s linear; }
        
        #game-board { display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; width: 98vw; height: 82vh; gap: 12px; padding: 10px; box-sizing: border-box; }
        
        /* ëª¨ë‹ˆí„° ìŠ¤íƒ€ì¼: ì»¬ëŸ¬ êµ¬ë³„ ê°•í™” */
        .monitor { position: relative; border: 8px solid; border-radius: 10px; display: flex; flex-direction: column; padding: 10px; transition: 0.3s; box-sizing: border-box; }
        .monitor.human-zone { background: var(--human-bg); border-color: var(--human-main); color: var(--dark); }
        .monitor.cat-zone { background: var(--cat-bg); border-color: var(--cat-main); color: var(--dark); }

        /* íŒ¨ë„í‹° ë½ë‹¤ìš´ */
        .monitor.locked { filter: grayscale(1) brightness(0.5); pointer-events: none; }
        .monitor.locked::after { content: "LOCKDOWN\n(10s)"; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 2rem; text-align: center; white-space: pre; z-index: 100; text-shadow: 3px 3px #000; }

        .tag { position: absolute; top: -15px; left: 20px; padding: 2px 12px; font-size: 0.9rem; font-weight: bold; color: white; border-radius: 5px; }
        .human-zone .tag { background: var(--human-main); }
        .cat-zone .tag { background: var(--cat-main); }

        .content-area { width: 100%; height: 40%; background: white; border: 3px solid #333; display: flex; justify-content: center; align-items: center; overflow: hidden; margin-bottom: 10px; }
        img, video { max-width: 100%; max-height: 100%; object-fit: contain; }

        /* 4x4 ì •ì‚¬ê°í˜• í‚¤íŒ¨ë“œ */
        .button-pad { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; width: 180px; margin: 0 auto; }
        .num-btn { 
            aspect-ratio: 1/1; background: white; border: 2px solid #333; 
            font-family: 'DungGeunMo'; font-size: 1.2rem; cursor: pointer;
            box-shadow: 0 4px 0 #999;
        }
        .num-btn:active { transform: translateY(2px); box-shadow: 0 2px 0 #999; }
        .num-btn.selected { background: #333; color: white; }
        
        .control-row { display: flex; gap: 5px; width: 180px; margin: 5px auto; }
        .ok-btn { flex: 2; height: 35px; background: #333; color: white; border: none; font-family: 'DungGeunMo'; cursor: pointer; }
        .audio-btn { flex: 1; height: 35px; background: #7f8c8d; color: white; border: none; font-family: 'DungGeunMo'; cursor: pointer; font-size: 0.7rem; }

        .feedback { text-align: center; font-weight: bold; height: 1.5rem; margin-top: 5px; font-size: 1rem; }
    </style>
</head>
<body>

<div id="header"><h1>[ CAT vs HUMAN ] SECURITY SYSTEM V8</h1></div>
<div id="timer-wrapper"><div id="timer-fill"></div></div>
<div id="game-board">
    <div id="m0" class="monitor"></div>
    <div id="m1" class="monitor"></div>
    <div id="m2" class="monitor"></div>
    <div id="m3" class="monitor"></div>
</div>

<script>
    const raw = (url) => url.replace("github.com", "raw.githubusercontent.com").replace("/blob/", "/");

    const problemDB = [
        { type: 'human', q: "[ë³´ê¸°] ê³ ì–‘ì´ê°€ ëª‡ ë²ˆ ë•Œë¦¬ë‚˜ìš”?", a: "ì •ë‹µ", img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/%EB%B3%B4%EA%B8%B0%EB%AC%B8%EC%A0%9C1.JPG"), video: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/%EB%B3%B4%EA%B8%B0%20%EB%AC%B8%EC%A0%9C%201%EB%B2%88%20%EB%95%8C%EB%A6%AC%EB%8A%94%20%EA%B3%A0%EC%96%91%EC%9D%B4.mp4"), multi: false },
        { type: 'human', q: "í˜ë¥´ì‹œì•ˆ ê³ ì–‘ì´ë¥¼ ê³ ë¥´ì„¸ìš”.", a: "1", img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/1.JPG"), multi: false },
        { type: 'human', q: "ì¸„ë¥´(í™©íƒœ)ë¥¼ ê³ ë¥´ì„¸ìš”.", a: "2", img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/2.JPG"), multi: false },
        { type: 'cat', q: "ëª‡ ì‹œ ì¸ì§€ ë§ì¶”ì„¸ìš”.", a: "9", img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/3.JPG"), multi: false },
        { type: 'human', q: "ê³ ì–‘ì´ê°€ ì•„ë‹Œ ê²ƒì„ ëˆ„ë¥´ì„¸ìš”.", a: "ì •ë‹µ", img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/4.JPG"), multi: false },
        { type: 'human', q: "í‹€ë¦° ê³³ì€ ì´ ëª‡ êµ°ë°?", a: "3", img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/5.JPG"), multi: false },
        { type: 'human', q: "ê³ ì–‘ì´ ì¹¸ ë²ˆí˜¸ë¥¼ ëª¨ë‘ ëˆ„ë¥´ì„¸ìš”.", a: "135", img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/6.JPG"), multi: true },
        { type: 'human', q: "ìˆ¨ì€ ê³ ì–‘ì´ ì¹¸ì„ ëª¨ë‘ ëˆ„ë¥´ì„¸ìš”.", a: "24", img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/7.JPG"), multi: true },
        { type: 'human', q: "ì•„ê¸° ìƒ´ ê³ ì–‘ì´ë¥¼ ê³ ë¥´ì„¸ìš”.", a: "3", img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/8.JPG"), multi: false },
        { type: 'cat', q: "ê³ ì–‘ì´ê°€ ìˆë˜ ìœ„ì¹˜ ê°œìˆ˜ëŠ”?", a: "3", img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/9.JPG"), multi: false },
        { type: 'cat', q: "ë“£ê¸° 1: ì†Œë¦¬ë¥¼ ë“£ê³  ì •ë‹µ ì…ë ¥!", a: "ì •ë‹µ", audio: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/%EA%B3%A0%EC%96%91%EC%9D%B4%20%EB%82%98%EA%B1%B0%EB%9E%98%20%EB%93%A3%EA%B8%B0%20%EB%AC%B8%EC%A0%9C%201%EB%B2%88.m4a"), img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/%EB%93%A3%EA%B8%B0%EB%AC%B8%EC%A0%9C1.JPG"), multi: false },
        { type: 'cat', q: "ë“£ê¸° 2: ê±°ê¾¸ë¡œ ë§í•œ ë¬¸ì¥ì€?", a: "ì •ë‹µ", audio: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/%EA%B3%A0%EC%96%91%EC%9D%B4%20%ED%95%9C%EA%B5%AD%EB%A7%90%EC%9D%84%20%EC%95%8C%EC%95%84%EC%9A%94%20%EB%93%A3%EA%B8%B0%20%EB%AC%B8%EC%A0%9C%202%EB%B2%88.m4a"), img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/%EB%93%A3%EA%B8%B0%EB%AC%B8%EC%A0%9C2.JPG"), multi: false },
        { type: 'cat', q: "ë“£ê¸° 3: ì‚¬ì˜¤ë¼ê³  í•œ ìŒì‹ì€?", a: "ì •ë‹µ", audio: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/%EB%93%A3%EA%B8%B0%20%EB%AC%B8%EC%A0%9C%203%EB%B2%88%20%EC%98%A4%EC%A7%95%EC%96%B4.m4a"), img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/%EB%93%A3%EA%B8%B0%EB%AC%B8%EC%A0%9C3.JPG"), multi: false },
        { type: 'cat', q: "ë“£ê¸° 4: ì‚¬ì˜¤ì§€ ë§ë¼ëŠ” ìŒì‹ì€?", a: "ì •ë‹µ", audio: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/%EB%93%A3%EA%B8%B0%20%EB%AC%B8%EC%A0%9C%204%EB%B2%88%20%EC%83%9D%EA%B0%81%20%EC%82%AC%EC%98%A4%EC%A7%80%20%EB%A7%88%EC%84%B8%EC%9A%94.m4a"), img: raw("https://github.com/bagjueun307/Cat_Vs_Human/blob/main/%EB%93%A3%EA%B8%B0%EB%AC%B8%EC%A0%9C4.JPG"), multi: false }
    ];

    let timeLeft = 100;
    let selectedAnswers = ["", "", "", ""];

    function setProblem(idx) {
        const m = document.getElementById(`m${idx}`);
        const p = problemDB[Math.floor(Math.random() * problemDB.length)];
        const isH = p.type === 'human';
        selectedAnswers[idx] = "";
        
        m.className = `monitor ${isH ? 'human-zone' : 'cat-zone'}`;
        let visual = p.video ? `<video src="${p.video}" autoplay loop muted playsinline></video>` : `<img src="${p.img}">`;
        
        m.innerHTML = `
            <div class="tag">${isH ? 'HUMAN ONLY' : 'CAT ONLY'}</div>
            <div style="font-size:0.8rem; text-align:center; height:1.8rem; font-weight:bold;">${p.q}</div>
            <div class="content-area">${visual}</div>
            <div class="button-pad">
                ${[1,2,3,4,5,6,7,8,9,0].map(n => `<button class="num-btn" onclick="btnPush(${idx}, '${n}', '${p.a}', ${p.multi}, this)">${n}</button>`).join('')}
            </div>
            <div class="control-row">
                ${p.audio ? `<button class="audio-btn" onclick="new Audio('${p.audio}').play()">ğŸµ SOUND</button>` : '<div style="flex:1"></div>'}
                <button class="ok-btn" onclick="btnPush(${idx}, 'OK', '${p.a}', false)">CONFIRM (OK)</button>
            </div>
            <div class="feedback" id="fb-${idx}"></div>
        `;
    }

    function btnPush(idx, val, correct, isMulti, btn) {
        if (isMulti) {
            if (val === 'OK') checkFinal(idx, selectedAnswers[idx], correct);
            else if (!selectedAnswers[idx].includes(val)) {
                selectedAnswers[idx] += val;
                btn.classList.add('selected');
            }
        } else {
            if (val === 'OK') checkFinal(idx, "ì •ë‹µ", correct);
            else checkFinal(idx, val, correct);
        }
    }

    function checkFinal(idx, val, correct) {
        const fb = document.getElementById(`fb-${idx}`);
        const sVal = val.split('').sort().join('');
        const sCor = correct.split('').sort().join('');

        if (val === correct || (val !== "" && sVal === sCor) || correct === "ì •ë‹µ") {
            fb.innerText = "ACCESS GRANTED"; fb.style.color = "var(--success)";
            setTimeout(() => setProblem(idx), 500);
        } else {
            fb.innerText = "ACCESS DENIED"; fb.style.color = "var(--fail)";
            applyPenalty(idx);
        }
    }

    function applyPenalty(idx) {
        const m = document.getElementById(`m${idx}`);
        m.classList.add('locked');
        setTimeout(() => { m.classList.remove('locked'); setProblem(idx); }, 10000);
    }

    function globalTimer() {
        timeLeft -= 0.15;
        document.getElementById('timer-fill').style.width = timeLeft + "%";
        if (timeLeft <= 0) {
            timeLeft = 100;
            for(let i=0; i<4; i++) {
                if(!document.getElementById(`m${i}`).classList.contains('locked')) setProblem(i);
            }
        }
    }

    for(let i=0; i<4; i++) setProblem(i);
    setInterval(globalTimer, 20);
</script>
</body>
</html>
